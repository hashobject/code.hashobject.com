<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport"><title>mangopay</title><meta content="A Clojure library for interaction with MangoPay REST API." name="description"><link href="/favicon.ico" rel="shortcut icon"><link href="https://plus.google.com/118068495795214676039" rel="publisher"><link href="/css/app.css" rel="stylesheet" type="text/css"><link href="http://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet" type="text/css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41533076-3', 'hashobject.com');
  ga('send', 'pageview');</script></head><body><header class="row"><div class="content"><a href="http://os.hashobject.com"><div class="logo"></div></a><nav role="navigation"><ul><li><a href="http://hashobject.com">Home</a></li><li><a href="http://blog.hashobject.com">Blog</a></li><li class="active"><a href="http://os.hashobject.com">Open Source</a></li></ul></nav></div></header><div class="row"><div class="content"><article class="docs-content columns large-12"><h1>mangopay</h1><p>A Clojure library for interaction with <a href="http://www.mangopay.com/overview/">MangoPay REST API</a>.</p><h2>Install</h2><p><div class="highlight"><pre><span class="p">[</span><span class="n">mangopay</span> <span class="s">&quot;0.1.0-SNAPSHOT&quot;</span><span class="p">]</span>
</pre></div>
</p><h2>Usage</h2><p>Below is an example how create, fetch and modify user.</p><p>All other interactions with MangoPay can be done in absolutely the same way.</p><p>MangoPay API is very consistent. You need just change 1 parameter of each method. So e.x. instead of 'users' just use 'wallets' or 'withdrawals'.</p><p>For details about what properties are required for each entity creation please visit an official API <a href="http://www.mangopay.com/api-references/">documentation</a>.</p><p>To include MangoPay library:</p><p><div class="highlight"><pre><span class="n">user</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">use</span> <span class="s">&#39;mangopay.core)</span>
<span class="n">null</span>
</pre></div>
</p><p>To create new user:</p><p><div class="highlight"><pre><span class="n">user</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">create</span> <span class="s">&quot;users&quot;</span>
        <span class="p">{</span><span class="s">&quot;FirstName&quot;</span> <span class="s">&quot;Mark&quot;</span><span class="p">,</span>
         <span class="s">&quot;LastName&quot;</span> <span class="s">&quot;Zuckerberg&quot;</span><span class="p">,</span>
         <span class="s">&quot;Email&quot;</span> <span class="s">&quot;mark@leetchi.com&quot;</span><span class="p">,</span>
         <span class="s">&quot;Nationality&quot;</span> <span class="s">&quot;FR&quot;</span><span class="p">,</span>
         <span class="s">&quot;Birthday&quot;</span> <span class="mi">1300186358</span><span class="p">,</span>
         <span class="s">&quot;PersonType&quot;</span> <span class="p">:</span><span class="n">NATURAL_PERSON</span><span class="p">,</span>
         <span class="s">&quot;Tag&quot;</span> <span class="s">&quot;custom information from the app&quot;</span><span class="p">}</span>
        <span class="p">{:</span><span class="n">partner</span><span class="o">-</span><span class="nb">id</span> <span class="s">&quot;communist&quot;</span>
         <span class="p">:</span><span class="n">host</span> <span class="s">&quot;http://api-preprod.leetchi.com&quot;</span>
         <span class="p">:</span><span class="n">rsa</span><span class="o">-</span><span class="n">key</span><span class="o">-</span><span class="n">path</span> <span class="s">&quot;/Users/podviaznikov/.ssh/mangopay_rsa&quot;</span><span class="p">})</span>
<span class="p">{</span><span class="s">&quot;LastName&quot;</span> <span class="s">&quot;Zuckerberg&quot;</span><span class="p">,</span> <span class="s">&quot;IP&quot;</span> <span class="n">nil</span><span class="p">,</span> <span class="s">&quot;CreationDate&quot;</span> <span class="mi">1371931163</span><span class="p">,</span> <span class="s">&quot;IsStrongAuthenticated&quot;</span> <span class="n">false</span><span class="p">,</span> <span class="s">&quot;PersonType&quot;</span> <span class="s">&quot;NATURAL_PERSON&quot;</span><span class="p">,</span> <span class="s">&quot;PersonalWalletAmount&quot;</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;UpdateDate&quot;</span> <span class="mi">1371931163</span><span class="p">,</span> <span class="s">&quot;CanRegisterMeanOfPayment&quot;</span> <span class="n">false</span><span class="p">,</span> <span class="s">&quot;Tag&quot;</span> <span class="s">&quot;custom information from the app&quot;</span><span class="p">,</span> <span class="s">&quot;ID&quot;</span> <span class="mi">337252</span><span class="p">,</span> <span class="s">&quot;FirstName&quot;</span> <span class="s">&quot;Mark&quot;</span><span class="p">,</span> <span class="s">&quot;Password&quot;</span> <span class="s">&quot;XGB5hY9PAWnWh3ZLi6OwKY0t1Fg6bM&quot;</span><span class="p">,</span> <span class="s">&quot;Nationality&quot;</span> <span class="s">&quot;FR&quot;</span><span class="p">,</span> <span class="s">&quot;Email&quot;</span> <span class="s">&quot;mark@leetchi.com&quot;</span><span class="p">,</span> <span class="s">&quot;HasRegisteredMeansOfPayment&quot;</span> <span class="n">false</span><span class="p">,</span> <span class="s">&quot;Birthday&quot;</span> <span class="mi">1300186358</span><span class="p">}</span>
</pre></div>
</p><p>To get information about existing user by MangoPay's id:</p><p><div class="highlight"><pre><span class="n">user</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">fetch</span> <span class="s">&quot;users&quot;</span>
         <span class="mi">337243</span>
         <span class="p">{:</span><span class="n">partner</span><span class="o">-</span><span class="nb">id</span> <span class="s">&quot;communist&quot;</span>
          <span class="p">:</span><span class="n">host</span> <span class="s">&quot;http://api-preprod.leetchi.com&quot;</span>
          <span class="p">:</span><span class="n">rsa</span><span class="o">-</span><span class="n">key</span><span class="o">-</span><span class="n">path</span> <span class="s">&quot;/Users/podviaznikov/.ssh/mangopay_rsa&quot;</span><span class="p">})</span>
<span class="p">{</span><span class="s">&quot;LastName&quot;</span> <span class="s">&quot;Zuckerberg&quot;</span><span class="p">,</span> <span class="s">&quot;IP&quot;</span> <span class="n">nil</span><span class="p">,</span> <span class="s">&quot;CreationDate&quot;</span> <span class="mi">1371931163</span><span class="p">,</span> <span class="s">&quot;IsStrongAuthenticated&quot;</span> <span class="n">false</span><span class="p">,</span> <span class="s">&quot;PersonType&quot;</span> <span class="s">&quot;NATURAL_PERSON&quot;</span><span class="p">,</span> <span class="s">&quot;PersonalWalletAmount&quot;</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;UpdateDate&quot;</span> <span class="mi">1371931163</span><span class="p">,</span> <span class="s">&quot;CanRegisterMeanOfPayment&quot;</span> <span class="n">false</span><span class="p">,</span> <span class="s">&quot;Tag&quot;</span> <span class="s">&quot;custom information from the app&quot;</span><span class="p">,</span> <span class="s">&quot;ID&quot;</span> <span class="mi">337252</span><span class="p">,</span> <span class="s">&quot;FirstName&quot;</span> <span class="s">&quot;Mark&quot;</span><span class="p">,</span> <span class="s">&quot;Password&quot;</span> <span class="s">&quot;XGB5hY9PAWnWh3ZLi6OwKY0t1Fg6bM&quot;</span><span class="p">,</span> <span class="s">&quot;Nationality&quot;</span> <span class="s">&quot;FR&quot;</span><span class="p">,</span> <span class="s">&quot;Email&quot;</span> <span class="s">&quot;mark@leetchi.com&quot;</span><span class="p">,</span> <span class="s">&quot;HasRegisteredMeansOfPayment&quot;</span> <span class="n">false</span><span class="p">,</span> <span class="s">&quot;Birthday&quot;</span> <span class="mi">1300186358</span><span class="p">}</span>
</pre></div>
</p><p>To update user's information:</p><p><div class="highlight"><pre><span class="n">user</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">modify</span> <span class="s">&quot;users&quot;</span>
         <span class="mi">337243</span>
        <span class="p">{</span><span class="s">&quot;FirstName&quot;</span> <span class="s">&quot;Markus&quot;</span>
         <span class="s">&quot;Tag&quot;</span> <span class="s">&quot;custom information from the app&quot;</span><span class="p">}</span>
        <span class="p">{:</span><span class="n">partner</span><span class="o">-</span><span class="nb">id</span> <span class="s">&quot;communist&quot;</span>
         <span class="p">:</span><span class="n">host</span> <span class="s">&quot;http://api-preprod.leetchi.com&quot;</span>
         <span class="p">:</span><span class="n">rsa</span><span class="o">-</span><span class="n">key</span><span class="o">-</span><span class="n">path</span> <span class="s">&quot;/Users/podviaznikov/.ssh/mangopay_rsa&quot;</span><span class="p">})</span>
<span class="p">{</span><span class="s">&quot;LastName&quot;</span> <span class="s">&quot;Zuckerberg&quot;</span><span class="p">,</span> <span class="s">&quot;IP&quot;</span> <span class="n">nil</span><span class="p">,</span> <span class="s">&quot;CreationDate&quot;</span> <span class="mi">1371930963</span><span class="p">,</span> <span class="s">&quot;IsStrongAuthenticated&quot;</span> <span class="n">false</span><span class="p">,</span> <span class="s">&quot;PersonType&quot;</span> <span class="s">&quot;NATURAL_PERSON&quot;</span><span class="p">,</span> <span class="s">&quot;PersonalWalletAmount&quot;</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;UpdateDate&quot;</span> <span class="mi">1371931136</span><span class="p">,</span> <span class="s">&quot;CanRegisterMeanOfPayment&quot;</span> <span class="n">false</span><span class="p">,</span> <span class="s">&quot;Tag&quot;</span> <span class="s">&quot;custom information from the app&quot;</span><span class="p">,</span> <span class="s">&quot;ID&quot;</span> <span class="mi">337243</span><span class="p">,</span> <span class="s">&quot;FirstName&quot;</span> <span class="s">&quot;Markus&quot;</span><span class="p">,</span> <span class="s">&quot;Password&quot;</span> <span class="s">&quot;bjA0SDwRphhEinYPv8FFLx6qEP5xPU&quot;</span><span class="p">,</span> <span class="s">&quot;Nationality&quot;</span> <span class="s">&quot;FR&quot;</span><span class="p">,</span> <span class="s">&quot;Email&quot;</span> <span class="s">&quot;mark@leetchi.com&quot;</span><span class="p">,</span> <span class="s">&quot;HasRegisteredMeansOfPayment&quot;</span> <span class="n">false</span><span class="p">,</span> <span class="s">&quot;Birthday&quot;</span> <span class="mi">1300186358</span><span class="p">}</span>
</pre></div>
</p><h2>Docs</h2><p>There are 3 methods:</p>
<ul>
  <li>(create [route input options])</li>
  <li>(fetch [route id options])</li>
  <li>(modify [route id input options])</li>
</ul><p>Options has 3 properties:</p>
<ul>
  <li>:partner-id - your id youshould receive from MangoPay on registration.</li>
  <li>:host - API endpoint. http://api-preprod.leetchi.com for testing and https://api.leetchi.com/v1/partner/ for production.</li>
  <li>:rsa-key-path - path to your private RSA key. Correspoding public key should be submitted to MangoPay on registration.</li>
</ul><h2>Contributions</h2><p>We love contributions. Please submit your pull requests.</p><h2>License</h2><p>Copyright © 2013 HashObject Ltd (team@hashobject.com).</p><p>The use and distribution terms for this software are covered by the <a href="http://opensource.org/licenses/eclipse-1.0">Eclipse Public License 1.0</a> which can be found in the file epl-v10.html at the root of this distribution.</p><p>By using this software in any fashion, you are agreeing to be bound by the terms of this license.</p><p>You must not remove this notice, or any other, from this software.</p></article></div></div><footer class="row"><div class="content"><p class="licence">Except as otherwise noted, the content of this site is licensed
     under the <a href='http://creativecommons.org/licenses/by/3.0/'>Creative Commons Attribution 3.0 License</a>,
     and code samples and library code are licensed under the
     <a href='http://opensource.org/licenses/eclipse-1.0'>Eclipse Public License 1.0</a>.</p></div></footer></body></html>